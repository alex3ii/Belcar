<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="stylesheet" href="Css.css">
  <meta charset="UTF-8">
  <title>Usuario - Arkham City</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #1a1a1a;
      color: white;
    }

    nav {
      background-color: black;
      display: flex;
      justify-content: space-between;
      padding: 10px 30px;
    }

    .logo {
      font-size: 28px;
      color: yellow;
      text-decoration: none;
      font-weight: bold;
    }

    .menu {
      display: flex;
      gap: 20px;
    }

    .menu a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }

    .menu a:hover {
      color: yellow;
    }

    .perfil i {
      color: white;
      cursor: pointer;
      font-size: 20px;
    }

    .perfil i:hover {
      color: yellow;
    }

    .layout {
      display: flex;
      height: calc(100vh - 60px);
    }

    .sidebar {
      width: 220px;
      background-color: #111;
      padding-top: 20px;
    }

    .sidebar a {
      display: block;
      padding: 15px 25px;
      color: white;
      text-decoration: none;
      font-weight: bold;
    }

    .sidebar a:hover,
    .sidebar a.active {
      background-color: #333;
    }

    .main {
      flex: 1;
      padding: 30px;
      overflow-y: auto;
    }

    .section {
      display: none;
      background-color: #222;
      padding: 20px;
      border-radius: 10px;
    }

    .section.active {
      display: block;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      margin: 10px 0;
      background-color: #333;
      padding: 10px;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    button {
      background-color: yellow;
      border: none;
      padding: 6px 12px;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
    }

    button:hover {
      background-color: #f0c800;
    }

    .eliminar {
      background-color: red;
      color: white;
      margin-left: 10px;
    }

    .eliminar:hover {
      background-color: darkred;
    }
  </style>
</head>
<body>

<!-- Navegaci√≥n principal -->
  <nav>
<a href="index.html" class="logo">
  <img src="Logos/logoBelcarosc.jpg" alt="Arkham City" style="height: 50px; width: auto;">
</a>

  <div class="menu">
    <div class="dropdown">
      <a href="#">Marcas de autos</a>
      <div class="dropdown-content">
        <a href="chevrolet.html">Chevrolet</a>
        <a href="Adidas.html">Porsche</a>
        <a href="Puma.html">Ford</a>
        <a href="Crocs.html">BMW</a>
      </div>
    </div>

    <div class="dropdown">
      <a href="#">Novedades</a>
      <div class="dropdown-content">
        <a href="paginaC.html">Modelos recientes</a>
        <a href="paginaC.html">Ediciones exclusivas</a>
      </div>
    </div>

    <div class="dropdown">
      <a href="#">Accesorios</a>
      <div class="dropdown-content">
        <a href="paginaC.html">Refacciones</a>
        <a href="paginaC.html">Servicios</a>
      </div>
    </div>


    <div class="dropdown">
      <a href="#">Promociones</a>
      <div class="dropdown-content">
        <a href="paginaC.html">Bonos de descuento</a>
        <a href="paginaC.html">Liquidaci√≥n</a>
      </div>
    </div>
  </div>

  <div class="perfil">
    <i onclick="window.location.href='Usuario.html'" title="Perfil">üë§</i>
  </div>
</nav>

<!-- Cuerpo dividido -->
<div class="layout">
  <!-- Barra lateral -->
  <div class="sidebar">
    <a href="#" class="tablink" onclick="mostrarSeccion('contacto', event)">üìû Cont√°ctanos</a>
  </div>

  <!-- Contenido -->
  <div class="main">
<div id="contacto" class="section active">
  <h3>üìû Cont√°ctanos</h3>
  
  <p>¬øTienes dudas? Escr√≠benos a 
<a href="https://mail.google.com/mail/?view=cm&fs=1&to=Belcar@gmail.com" target="_blank" style="color: inherit; text-decoration: none;">
  Belcar@gmail.com
</a>
  </p>

  <!-- Iconos de Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Bot√≥n de WhatsApp -->
  <a href="https://wa.me/5214491286389?text=Hola,%20quiero%20m√°s%20informaci√≥n" target="_blank" style="
    display: inline-block;
    background-color: #25D366;
    color: white;
    padding: 10px 20px;
    text-decoration: none;
    border-radius: 5px;
    font-weight: bold;
    margin-top: 10px;
  ">
    <i class="fab fa-whatsapp"></i> Escr√≠benos por WhatsApp
  </a>
</div>

  </div>
</div>

<!-- Funcionalidad JS -->
<script>
  function mostrarSeccion(id, event) {
    document.querySelectorAll(".section").forEach(sec => sec.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    document.querySelectorAll(".tablink").forEach(tab => tab.classList.remove("active"));
    event.target.classList.add("active");
  }

  function crearItemConBoton(item, tipo, index) {
    const li = document.createElement("li");
    li.textContent = item.nombre ? `${item.nombre} - $${item.precio} MXN` : item;

    const btn = document.createElement("button");
    btn.className = "eliminar";
    btn.textContent = "üóëÔ∏è";
    btn.onclick = function () {
      eliminarElemento(tipo, index);
    };

    li.appendChild(btn);
    return li;
  }
if (!localStorage.getItem("usuarioLogueado")) {
  window.location.href = "login.html";
}
  function eliminarElemento(tipo, index) {
    let data = JSON.parse(localStorage.getItem(tipo) || "[]");
    data.splice(index, 1);
    localStorage.setItem(tipo, JSON.stringify(data));
    cargarListas();
  }
function cerrarSesion() {
  localStorage.removeItem("usuarioLogueado");
  window.location.href = "login.html";
}

  function cargarListas() {
    const favoritos = JSON.parse(localStorage.getItem("favoritos") || "[]");
    const carrito = JSON.parse(localStorage.getItem("carrito") || "[]");
    const pujas = JSON.parse(localStorage.getItem("pujas") || "[]");
    const historial = JSON.parse(localStorage.getItem("historial") || "[]");

    const listaFav = document.getElementById("listaFavoritos");
    const listaCart = document.getElementById("listaCarrito");
    const listaPujas = document.getElementById("listaPujas");
    const listaHist = document.getElementById("listaHistorial");

    listaFav.innerHTML = favoritos.length ? "" : "<li>No tienes productos favoritos a√∫n.</li>";
    listaCart.innerHTML = carrito.length ? "" : "<li>Tu carrito est√° vac√≠o.</li>";
    listaPujas.innerHTML = pujas.length ? "" : "<li>No has hecho ninguna puja a√∫n.</li>";
    listaHist.innerHTML = historial.length ? "" : "<li>No hay historial de compras.</li>";

    favoritos.forEach((item, index) => {
      listaFav.appendChild(crearItemConBoton(item, "favoritos", index));
    });

    let total = 0;
    carrito.forEach((item, index) => {
      listaCart.appendChild(crearItemConBoton(item, "carrito", index));
      if (item.precio) total += parseFloat(item.precio);
    });

if (carrito.length) {
  const totalLi = document.createElement("li");
  totalLi.innerHTML = `<strong>Total: $${total.toFixed(2)} MXN</strong>`;
  listaCart.appendChild(totalLi);

  // Contenedor PayPal
  const paypalContainer = document.createElement("div");
  paypalContainer.id = "paypal-button-container";
  paypalContainer.style.marginTop = "20px";
  listaCart.appendChild(paypalContainer);

  // Logos de tarjetas
  const logosContainer = document.createElement("div");
  logosContainer.innerHTML = `
    <div style="margin-top: 15px; display: flex; gap: 15px; align-items: center;">
      <img src="https://www.paypalobjects.com/webstatic/mktg/logo/pp_cc_mark_111x69.jpg" alt="PayPal" style="height: 30px;">
      <img src="https://upload.wikimedia.org/wikipedia/commons/0/04/Visa.svg" alt="Visa" style="height: 24px;">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTuTwNB8upRoQJiLcSYPPRUKn3v-Oksekb78w&s" alt="MasterCard" style="height: 24px;">
    </div>
  `;
  listaCart.appendChild(logosContainer);

  // SDK de PayPal con tu Client ID
  const script = document.createElement("script");
  script.src = "https://www.paypal.com/sdk/js?client-id=Ab8T6SqCy15oxadSh3DqKnzjZtVa3jVx6hJ4mGXvOvB23ZbEpQFsoBrO3QH6A-EVKsbh0EyBDoDWhhi7&currency=MXN";
  script.onload = () => {
    paypal.Buttons({
      createOrder: function (data, actions) {
        return actions.order.create({
          purchase_units: [{
            amount: {
              value: total.toFixed(2)
            }
          }]
        });
      },
      onApprove: function (data, actions) {
        return actions.order.capture().then(function (details) {
          alert('Gracias por tu compra, ' + details.payer.name.given_name + '!');
          const historialPrevio = JSON.parse(localStorage.getItem("historial") || "[]");
          const historialNuevo = historialPrevio.concat(carrito);
          localStorage.setItem("historial", JSON.stringify(historialNuevo));
          localStorage.setItem("carrito", "[]");
          cargarListas();
        });
      }
    }).render('#paypal-button-container');
  };
  document.body.appendChild(script);
}

    pujas.forEach((item, index) => {
      listaPujas.appendChild(crearItemConBoton(item, "pujas", index));
    });

    historial.forEach((item, index) => {
      const li = document.createElement("li");
      li.textContent = item.nombre ? `${item.nombre} - $${item.precio} MXN` : item;
      listaHist.appendChild(li);
    });
  }

  window.onload = cargarListas;
  // Mostrar info de usuario
const usuarioLogueado = JSON.parse(localStorage.getItem("usuarioLogueado"));
if (usuarioLogueado) {
  document.getElementById("perfilNombre").textContent = usuarioLogueado.nombre;
  document.getElementById("perfilCorreo").textContent = usuarioLogueado.correo;
  document.getElementById("perfilUsuario").textContent = usuarioLogueado.usuario;
}

</script>

</body>
</html>
